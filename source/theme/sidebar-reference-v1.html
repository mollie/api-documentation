{% from 'macros/sidebar-item.html' import sidebar_item with context -%}
{% from 'macros/sidebar-collapse-group.html' import sidebar_collapse_group with context -%}

{% include 'back-to-v2.html' %}

<p class="sidebar__topic-header">Accepting payments</p>

<ul>
  {%- set current = pagename.startswith('reference/v1/payments-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/payments-api/create-payment') }}">Payments API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/payments-api/create-payment',
          'Create payment'
        ) }}
        {{ sidebar_item(
          'reference/v1/payments-api/get-payment',
          'Get payment'
        ) }}
        {{ sidebar_item(
          'reference/v1/payments-api/cancel-payment',
          'Cancel payment'
        ) }}
        {{ sidebar_item(
          'reference/v1/payments-api/list-payments',
          'List payments'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/methods-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/methods-api/list-methods') }}">Methods API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/methods-api/list-methods',
          'List methods'
        ) }}
        {{ sidebar_item(
          'reference/v1/methods-api/get-method',
          'Get method'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/issuers-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/issuers-api/list-issuers') }}">Issuers API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/issuers-api/list-issuers',
          'List issuers'
        ) }}
        {{ sidebar_item(
          'reference/v1/issuers-api/get-issuer',
          'Get issuer'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/refunds-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/refunds-api/create-refund') }}">Refunds API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/refunds-api/create-refund',
          'Create refund'
        ) }}
        {{ sidebar_item(
          'reference/v1/refunds-api/get-refund',
          'Get refund'
        ) }}
        {{ sidebar_item(
          'reference/v1/refunds-api/cancel-refund',
          'Cancel refund'
        ) }}
        {{ sidebar_item(
          'reference/v1/refunds-api/list-refunds',
          'List refunds'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/chargebacks-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/chargebacks-api/get-chargeback') }}">Chargebacks API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/chargebacks-api/get-chargeback',
          'Get chargeback'
        ) }}
        {{ sidebar_item(
          'reference/v1/chargebacks-api/list-chargebacks',
          'List chargebacks'
        ) }}
      </ul>
    {%- endif %}
  </li>
</ul>

<p class="sidebar__topic-header">Recurring</p>

<ul>
  {%- set current = pagename.startswith('reference/v1/customers-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/customers-api/create-customer') }}">Customers API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/customers-api/create-customer',
          'Create customer'
        ) }}
        {{ sidebar_item(
          'reference/v1/customers-api/get-customer',
          'Get customer'
        ) }}
        {{ sidebar_item(
          'reference/v1/customers-api/update-customer',
          'Update customer'
        ) }}
        {{ sidebar_item(
          'reference/v1/customers-api/delete-customer',
          'Delete customer'
        ) }}
        {{ sidebar_item(
          'reference/v1/customers-api/list-customers',
          'List customers'
        ) }}
        {{ sidebar_item(
          'reference/v1/customers-api/create-customer-payment',
          'Create customer payment'
        ) }}
        {{ sidebar_item(
          'reference/v1/customers-api/list-customer-payments',
          'List customer payments'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/mandates-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/mandates-api/create-mandate') }}">Mandates API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/mandates-api/create-mandate',
          'Create mandate'
        ) }}
        {{ sidebar_item(
          'reference/v1/mandates-api/get-mandate',
          'Get mandate'
        ) }}
        {{ sidebar_item(
          'reference/v1/mandates-api/revoke-mandate',
          'Revoke mandate'
        ) }}
        {{ sidebar_item(
          'reference/v1/mandates-api/list-mandates',
          'List mandates'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/subscriptions-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/subscriptions-api/create-subscription') }}">Subscriptions API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/subscriptions-api/create-subscription',
          'Create subscription'
        ) }}
        {{ sidebar_item(
          'reference/v1/subscriptions-api/get-subscription',
          'Get subscription'
        ) }}
        {{ sidebar_item(
          'reference/v1/subscriptions-api/cancel-subscription',
          'Cancel subscription'
        ) }}
        {{ sidebar_item(
          'reference/v1/subscriptions-api/list-subscriptions',
          'List subscriptions'
        ) }}
      </ul>
    {%- endif %}
  </li>
</ul>

<p class="sidebar__topic-header">Connect</p>

<ul>
  <li class="sidebar__item sidebar__group">
    <a href="{{ pathto('reference/oauth2/authorize') }}">OAuth API</a>
  </li>

  {%- set current = pagename.startswith('reference/v1/permissions-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/permissions-api/get-permission') }}">Permissions API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/permissions-api/get-permission',
          'Get permission'
        ) }}
        {{ sidebar_item(
          'reference/v1/permissions-api/list-permissions',
          'List permissions'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/organizations-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/organizations-api/get-organization') }}">Organizations API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/organizations-api/get-organization',
          'Get organization'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/profiles-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/profiles-api/create-profile') }}">Profiles API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/profiles-api/create-profile',
          'Create profile'
        ) }}
        {{ sidebar_item(
          'reference/v1/profiles-api/get-profile',
          'Get profile'
        ) }}
        {{ sidebar_item(
          'reference/v1/profiles-api/update-profile',
          'Update profile'
        ) }}
        {{ sidebar_item(
          'reference/v1/profiles-api/delete-profile',
          'Delete profile'
        ) }}
        {{ sidebar_item(
          'reference/v1/profiles-api/list-profiles',
          'List profiles'
        ) }}
        {{ sidebar_item(
          'reference/v1/profiles-api/get-key',
          'Get API key'
        ) }}
        {{ sidebar_item(
          'reference/v1/profiles-api/reset-key',
          'Reset API key'
        ) }}
        {{ sidebar_item(
          'reference/v1/profiles-api/list-keys',
          'List API keys'
        ) }}
      </ul>
    {%- endif %}
  </li>
</ul>

<p class="sidebar__topic-header">Business operations</p>

<ul>
  {%- set current = pagename.startswith('reference/v1/settlements-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/settlements-api/get-settlement') }}">Settlements API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/settlements-api/get-settlement',
          'Get settlement'
        ) }}
        {{ sidebar_item(
          'reference/v1/settlements-api/list-settlements',
          'List settlements'
        ) }}
        {{ sidebar_item(
          'reference/v1/settlements-api/list-settlement-payments',
          'List settlement payments'
        ) }}
        {{ sidebar_item(
          'reference/v1/settlements-api/list-settlement-refunds',
          'List settlement refunds'
        ) }}
        {{ sidebar_item(
          'reference/v1/settlements-api/list-settlement-chargebacks',
          'List settlement chargebacks'
        ) }}
      </ul>
    {%- endif %}
  </li>

  {%- set current = pagename.startswith('reference/v1/invoices-api/') -%}
  <li class="sidebar__item sidebar__group {%- if current %} current{% endif %}">
    <a href="{{ pathto('reference/v1/invoices-api/get-invoice') }}">Invoices API</a>

    {%- if current %}
      <ul>
        {{ sidebar_item(
          'reference/v1/invoices-api/get-invoice',
          'Get invoice'
        ) }}
        {{ sidebar_item(
          'reference/v1/invoices-api/list-invoices',
          'List invoices'
        ) }}
      </ul>
    {%- endif %}
  </li>
</ul>
